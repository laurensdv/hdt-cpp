<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>cds: CDS: Concurrent Data Structures library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cds
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CDS: Concurrent Data Structures library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This library is a collection of lock-free and lock-based fine-grained algorithms of data structures like maps, queues, list etc. The library contains implementation of well-known data structures and memory reclamation schemas for modern processor architectures. The library is written on C++11.</p>
<p>The main namespace for the library is <a class="el" href="namespacecds.html">cds</a>. To see the full list of container's class go to <a href="modules.html">modules</a> tab.</p>
<p>Supported processor architectures and operating systems (OS) are:</p><ul>
<li>x86 [32bit] Linux, Windows, FreeBSD, MinGW</li>
<li>amd64 (x86-64) [64bit] Linux, Windows, FreeBSD, MinGW</li>
<li>ia64 (itanium) [64bit] Linux, HP-UX 11.23, HP-UX 11.31</li>
<li>sparc [64bit] Sun Solaris</li>
<li>Mac OS X amd64</li>
<li>ppc64 Linux</li>
</ul>
<p>Supported compilers:</p><ul>
<li>GCC 4.8+</li>
<li>Clang 3.3+</li>
<li>MS Visual C++ 2013 Update 4 and above</li>
<li>Intel C++ Compiler 15</li>
</ul>
<p>For each lock-free data structure the <code>CDS</code> library presents several implementation based on published papers. For example, there are several implementations of queue, each of them is divided by memory reclamation schema used. However, any implementation supports common interface for the type of data structure.</p>
<p>To use any lock-free data structure, the following are needed:</p><ul>
<li>atomic operation library conforming with C++11 memory model. The <b>libcds</b> can be built with <code>std::atomic</code>, <code>boost::atomic</code> or its own <a class="el" href="namespacecds_1_1cxx11__atomic.html#cds_cxx11_atomic">atomic implementation</a></li>
<li>safe memory reclamation (SMR) or garbage collecting (GC) algorithm.</li>
</ul>
<p>SMR is the main part of lock-free data structs. The SMR solves the problem of safe memory reclamation that is one of the main problem for lock-free programming. The library contains the implementations of several light-weight <a class="el" href="group__cds__garbage__collector.html">memory reclamation schemes</a>:</p><ul>
<li>M.Michael's Hazard Pointer - see <code><a class="el" href="classcds_1_1gc_1_1_h_p.html" title="Hazard Pointer garbage collector. ">cds::gc::HP</a></code>, <code><a class="el" href="classcds_1_1gc_1_1_d_h_p.html" title="Dynamic Hazard Pointer garbage collector. ">cds::gc::DHP</a></code> for more explanation</li>
<li>User-space Read-Copy Update (RCU) - see <code><a class="el" href="namespacecds_1_1urcu.html" title="User-space Read-Copy Update (URCU) namespace. ">cds::urcu</a></code> namespace</li>
<li>there is an empty <code><a class="el" href="classcds_1_1gc_1_1nogc.html" title="No garbage collecting. ">cds::gc::nogc</a></code> "GC" for append-only containers that do not support item reclamation.</li>
</ul>
<p>Many GC requires a support from the thread. The library does not define the threading model you must use, it is developed to support various ones; about incorporating <b>cds</b> library to your threading model see <code><a class="el" href="namespacecds_1_1threading.html" title="Threading support. ">cds::threading</a></code>.</p>
<p><a class="anchor" id="cds_how_to_use"></a></p><dl class="section user"><dt>How to use</dt><dd></dd></dl>
<p>The main part of lock-free programming is SMR, so-called garbage collector, for safe memory reclamation. The library provides several types of SMR schemes. One of widely used and well-tested is Hazard Pointer memory reclamation schema discovered by M. Micheal and implemented in the library as <code><a class="el" href="classcds_1_1gc_1_1_h_p.html" title="Hazard Pointer garbage collector. ">cds::gc::HP</a></code> class. Usually, the application is based on only one type of GC.</p>
<p>In the next example we mean that you use Hazard Pointer <code><a class="el" href="classcds_1_1gc_1_1_h_p.html" title="Hazard Pointer garbage collector. ">cds::gc::HP</a></code> - based containers.</p>
<p>First, in your code you should initialize <code>cds</code> library and Hazard Pointer in <code>main()</code> function: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cds/init.h&gt;</span>       <span class="comment">// for cds::Initialize and cds::Terminate</span></div>
<div class="line"><span class="preprocessor">#include &lt;cds/gc/hp.h&gt;</span>      <span class="comment">// for cds::HP (Hazard Pointer) SMR</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Initialize libcds</span></div>
<div class="line">    <a class="code" href="namespacecds.html#ae14cc7bb67e75ea6ed18a82f3380d2c0">cds::Initialize</a>();</div>
<div class="line"></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Initialize Hazard Pointer singleton</span></div>
<div class="line">        cds::gc::HP hpGC;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// If main thread uses lock-free containers</span></div>
<div class="line">        <span class="comment">// the main thread should be attached to libcds infrastructure</span></div>
<div class="line">        cds::threading::Manager::attachThread();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Now you can use HP-based containers in the main thread</span></div>
<div class="line">        <span class="comment">//...</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Terminate libcds</span></div>
<div class="line">    <a class="code" href="namespacecds.html#a9ca275d587d2b0b11ded25220718a049">cds::Terminate</a>();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Second, any of your thread should be attached to <code>cds</code> infrastructure. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cds/gc/hp.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> myThreadEntryPoint(<span class="keywordtype">void</span> *)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Attach the thread to libcds infrastructure</span></div>
<div class="line">    cds::threading::Manager::attachThread();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Now you can use HP-based containers in the thread</span></div>
<div class="line">    <span class="comment">//...</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Detach thread when terminating</span></div>
<div class="line">    cds::threading::Manager::detachThread();</div>
<div class="line">}</div>
</div><!-- fragment --><p>After that, you can use <code>cds</code> lock-free containers safely without any external synchronization.</p>
<p>In some cases, you should work in an external thread. For example, your application is a plug-in for a server that calls your code in a thread that has been created by the server. In this case, you should use persistent mode of garbage collecting. In this mode, the thread attaches to the GC singleton only if it is not attached yet and never call detaching: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cds/gc/hp.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> plugin_entry_point()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Attach the thread if it is not attached yet</span></div>
<div class="line">    <span class="keywordflow">if</span> ( !cds::threading::Manager::isThreadAttached() )</div>
<div class="line">        cds::threading::Manager::attachThread();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Do some work with HP-related containers</span></div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section user"><dt>How to build</dt><dd></dd></dl>
<p>The <b>cds</b> is mostly header-only library. Only small part of library related to GC core functionality should be compiled.</p>
<p>The test projects depends on the following static library from <code>boost:</code> </p><ul>
<li><code>boost.thread</code> </li>
<li><code>boost.date_time</code> </li>
</ul>
<dl class="section user"><dt>Windows build</dt><dd></dd></dl>
<p>Prerequisites: for building <b>cds</b> library and test suite you need:</p><ul>
<li><a href="http://www.activestate.com/activeperl/downloads">perl</a> installed; <code>PATH</code> environment variable should contain full path to Perl binary. Perl is used to generate large dictionary for testing purpose;</li>
<li><a href="http://www.boost.org/">boost library</a> 1.51 and above. You should create environment variable <code>BOOST_PATH</code> containing full path to <code>boost</code> root directory (for example, <code>C:\libs\boost_1_57_0</code>).</li>
</ul>
<p>Open solution file <code>cds\projects\vcX\cds.sln</code> where <code>vcX</code> is the version of Microsoft Visual C++ you use: vc12 for MS VC 2013 Update 4, vc14 for MS VC 2015. The solution contains <code>cds</code> project and a lot of test projects. Just build the library using solution.</p>
<p><b>Warning</b>: the solution depends on <code>BOOST_PATH</code> environment variable that specifies full path to <code>boost</code> library root directory. The test projects search <code>boost</code> libraries in:</p><ul>
<li>for 32bit: <code>$(BOOST_PATH)/stage/lib</code>, <code>$(BOOST_PATH)/stage32/lib</code>, and <code>$(BOOST_PATH)/bin</code>.</li>
<li>for 64bit: <code>$(BOOST_PATH)/stage64/lib</code> and <code>$(BOOST_PATH)/bin</code>.</li>
</ul>
<dl class="section user"><dt>*NIX build</dt><dd></dd></dl>
<p>For Unix-like systems GCC and Clang compilers are supported. Use GCC 4.8+ compiler or Clang 3.3+ to build <b>cds</b> library. The distributive contains makefile and <code>build.sh</code> script in <code>build</code> directory. The <code>build/sample</code> directory contains sample scripts for different operating systems and processor architectures. The <code>build.sh</code> script supports the following options:</p><ul>
<li><code>-c toolset</code> - Toolset name, possible values: <code>gcc</code> (default), <code>clang</code>, <code>icc</code></li>
<li><code>-x compiler</code> - C++ compiler name (e.g. g++, g++-4.5 and so on)</li>
<li><code>-p arch</code> - processor architecture; possible values for arch are: x86, amd64 (x86_64), sparc, ia64, ppc64</li>
<li><code>-o OStype</code> - OS family; possible values for OStype are: linux, sunos (solaris), hpux, mingw</li>
<li><code>-D define</code> additional defines</li>
<li><code>-b bits</code> - bits to build, accepts 64, 32</li>
<li><code>-l "options"</code> - extra linker options (in quotes)</li>
<li><code>-z "options"</code> - extra compiler options (in quotes)</li>
<li><code>&ndash;with-boost path</code> - path to boost include</li>
<li><code>&ndash;debug-cxx-options "options"</code> - extra compiler options for debug target</li>
<li><code>&ndash;debug-ld-options "options"</code> - extra linker options for debug target</li>
<li><code>&ndash;release-cxx-options "options"</code> - extra compiler options for release target</li>
<li><code>&ndash;release-ld-options "optons"</code> - extra linker options for release target</li>
<li><code>&ndash;clean</code> - clean all before building</li>
<li><code>&ndash;debug-test</code> - make unit test in debug mode; by defalt release unit test generated</li>
<li><code>&ndash;amd64-use-128bit</code> - compile with supporting 128bit (16byte) CAS on amd64 (for am64 only)</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Important for GCC compiler: all your projects that use <code>libcds</code> must be compiled with <b>-fno-strict-aliasing</b> compiler flag. </dd></dl>
</div></div><!-- contents -->
<hr/>
<div align="right">
  <b>cds</b> <b>2.0.0</b> 
  Developed by <i>Maxim Khiszinsky aka khizmax</i> 2007 - 2014
  <br/>
  <i>Autogenerated Tue Dec 30 2014 08:53:28 by Doxygen 1.8.8</i>
</div>
</body>
</html>
